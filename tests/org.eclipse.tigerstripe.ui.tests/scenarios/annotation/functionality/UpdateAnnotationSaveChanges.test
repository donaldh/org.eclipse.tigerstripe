<?xml version="1.0" encoding="utf-8"?>
<com.xored.q7.scenario:Scenario xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.xored.q7.scenario="http://com/xored/q7/scenario.ecore" xmlns:org.eclipse.ecl.core="http://www.eclipse.org/ecl/core.ecore" name="UpdateAnnotationSaveChanges" version="3.0" id="_Ju498MoQEeC0xcEXnuyT1g" description="Update annotations in Annotation property view and save changes&#xD;&#xA;&#xD;&#xA;Precondition&#xD;&#xA;RemoveAnnotationsContextGroup&#xD;&#xA;&#xD;&#xA;Steps:&#xD;&#xA;1. Open TextAnnotation for Entity&#xD;&#xA;2. Update value in 'value' column for different annotation types for selected annotation in Annotation Property View.&#xD;&#xA;3. Check that annotation name is dirty&#xD;&#xA;4. Click on any element in Tigerstripe Explorer &#xD;&#xA;5. Save changes&#xD;&#xA;6. Check that annotation name is not dirty&#xD;&#xA;7. Check updated value" tags="Annotation" type="ecl" externalReference="http://docs.xored.com/display/TS/UpdateAnnotationSaveChanges">
  <contexts>_pje2YGyZEeC-86eLlbu98w</contexts>
  <content xsi:type="org.eclipse.ecl.core:Script">
    <content><![CDATA[get-view "Tigerstripe Explorer" | get-tree | select "New Project/src/org.eclipse/Entity1"
get-view "Annotation Property View" | click -nowait
get-view "Tigerstripe Explorer" | get-tree | select "New Project/src/org.eclipse/Entity1"
with [get-view "Annotation Property View"] {
    get-table | select TextAnnotation
    with [get-tree] {
        get-cell 0 0 | click -nowait
        select text | get-cell 0 0 | click -nowait
        get-cell 0 1 | click -nowait
        select text | get-item -index 0 | activate-cell-edit
        get-button "..." | click
    }
}
with [get-window text] {
    get-editbox | set-text test
    get-button OK | click
}
get-view "Annotation Property View" | get-tree | get-item -index 0 | apply-cell-edit
return-from-os-dialog "MESSAGE_BOX" 64
get-view "Tigerstripe Explorer" | get-tree | select "New Project/src/org.eclipse/Entity0"
get-view "Tigerstripe Explorer" | get-tree | select "New Project/src/org.eclipse/Entity1"
with [get-view "Annotation Property View"] {
    get-table | get-item TextAnnotation | get-property caption | equals TextAnnotation | verify-true
    with [get-tree] {
        get-item text | get-property columns -index 0 | equals text | verify-true
        get-item text | get-property columns -index 1 | equals test | verify-true
        get-item text | get-property columns -index 2 | equals "" | verify-true
    }
}
with [get-view "Annotation Property View"] {
    get-table | select CheckAnnotation
        with [get-tree] {
        get-cell 0 0 | click -nowait
        select checked | get-cell 0 0 | click -nowait
        get-cell 0 1 | click -nowait
        select checked | get-item -index 0 | activate-cell-edit
        get-combo | set-text true
        get-item -index 0 | apply-cell-edit
    }
}
get-view "Annotation Property View" | get-table | get-item "\\*CheckAnnotation" | get-property caption 
    | equals "*CheckAnnotation" | verify-true
with [get-view "Annotation Property View" | get-tree] {
    get-item checked | get-property columns -index 0 | equals checked | verify-true
    get-item checked | get-property columns -index 1 | equals true | verify-true
    get-item checked | get-property columns -index 2 | equals "" | verify-true
}
get-view "Annotation Property View" | get-tree | get-item -index 0 | apply-cell-edit
return-from-os-dialog "MESSAGE_BOX" 64
get-view "Tigerstripe Explorer" | get-tree | select "New Project/src/org.eclipse/Entity0"
get-view "Tigerstripe Explorer" | get-tree | select "New Project/src/org.eclipse/Entity1"
get-view "Annotation Property View" | get-table | select CheckAnnotation
get-view "Annotation Property View" | get-table | get-item CheckAnnotation | get-property caption 
    | equals CheckAnnotation | verify-true
with [get-view "Annotation Property View" | get-tree] {
    get-item checked | get-property columns -index 0 | equals checked | verify-true
    get-item checked | get-property columns -index 1 | equals true | verify-true
    get-item checked | get-property columns -index 2 | equals "" | verify-true
}
with [get-view "Annotation Property View"] {
    get-table | select IntegerAnnotation
    with [get-tree] {
        get-cell 0 0 | click -nowait
        select integer | get-cell 0 0 | click -nowait
        get-cell 0 1 | click -nowait
        select integer | get-item -index 0 | activate-cell-edit
        get-editbox | set-text 22
        get-item -index 0 | apply-cell-edit
    }
    get-table | select "\\*IntegerAnnotation"
}
get-view "Annotation Property View" | get-table | get-item "\\*IntegerAnnotation" | get-property caption 
    | equals "*IntegerAnnotation" | verify-true
with [get-view "Annotation Property View" | get-tree | get-item integer] {
    get-property columns -index 0 | equals integer | verify-true
    get-property columns -index 1 | equals 22 | verify-true
    get-property columns -index 2 | equals "" | verify-true
}
return-from-os-dialog "MESSAGE_BOX" 64
get-view "Tigerstripe Explorer" | get-tree | select "New Project/src/org.eclipse/Entity0"
get-view "Tigerstripe Explorer" | get-tree | select "New Project/src/org.eclipse/Entity1"
get-view "Annotation Property View" | get-table | select IntegerAnnotation
with [get-view "Annotation Property View"] {
    get-table | get-item IntegerAnnotation | get-property caption | equals IntegerAnnotation | verify-true
    with [get-tree] {
        get-item integer | get-property columns -index 0 | equals integer | verify-true
        get-item integer | get-property columns -index 1 | equals 22 | verify-true
        get-item integer | get-property columns -index 2 | equals "" | verify-true
    }
}]]></content>
  </content>
</com.xored.q7.scenario:Scenario>
