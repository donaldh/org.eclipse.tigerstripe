--- Q7 testcase ---
Q7-vendor: www.xored.com/q7
Format-Version: 1.0
Element-Name: 356817_RefreshOfAnnotationFileDangling
Tags: Annotation
External-Reference: http://docs.xored.com/display/TS/356817_RefreshOfAnnotationFileDangling
Element-Version: 3.0
Contexts: _RR91gMiqEeCVYvz9uSPZwA,_Kb5-0NnQEeCrRbabNEcanQ,_9D6jAatgEd-v8JwXbnu_tQ
Save-Time: 1/18/12 1:28 PM
Id: _0gGHsO8sEeCeLo_urxYMqg

------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa
Entry-Name: .description
Content-Type: text/plain

Annotation file changes (annotation is removed and warning is displayed) are displayed in project 

Precondition
    RemoveAnnotationsContextWorkspace
    AnnotationsContextPreferences

Steps
    Check 5 annotations for Entity1 in Tigerstripe Explorer and Annotation View
    Open annotation file in text editor and add another text annotation for Entity1
    Save changes
    Refresh project
    Check 4 annotations for Entity1 in Tigerstripe Explorer and Annotation View
    Check warning message in Problems view

------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa--
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Entry-Name: .content
Content-Type: text/ecl

get-view "Tigerstripe Explorer" | get-tree 
    | get-item "New Project/src/org.eclipse/<<CheckAnnotation,IntegerAnnotation,TextAnnotation,Color,Font>>Entity1" 
    | get-property caption | equals "<<CheckAnnotation,IntegerAnnotation,TextAnnotation,Color,Font>>Entity1" 
    | verify-true
get-view "Annotation Property View" | click -nowait
get-view "Tigerstripe Explorer" | get-tree 
    | select "New Project/src/org.eclipse/<<CheckAnnotation,IntegerAnnotation,TextAnnotation,Color,Font>>Entity1"
get-view "Annotation Property View" | get-table | get-property itemCount | equals 5 | verify-true
get-view "Tigerstripe Explorer" | get-tree | select "New Project/annotations/org.eclipse.tigerstripe.annotation.ann" 
    | select "New Project/annotations/org.eclipse.tigerstripe.annotation.ann" | get-menu "Open With/Text Editor" | click

with [get-editor "org.eclipse.tigerstripe.annotation.ann" | get-editbox] {
    set-text-offset 98 48
    key-type BS
    key-type "NUMPAD_2" 2
}
get-button "Save \(.*\)" | click
get-editor "org.eclipse.tigerstripe.annotation.ann" | close
get-view "Tigerstripe Explorer" | click -nowait
get-view Problems | click -nowait
get-view Problems | get-tree | get-item "Warnings \\(1 item\\)" | get-property caption | equals "Warnings (1 item)" 
    | verify-true
with [get-view Problems | get-tree | get-item "Warnings \\(1 item\\)/Unresolved annotation \'Text Annotation\'"] {
    get-property columns -index 0 | equals "Unresolved annotation \'Text Annotation\'" | verify-true
    get-property columns -index 1 | equals "org.eclipse.tigerstripe.annotation.ann" | verify-true
    get-property columns -index 2 | equals "/New Project/annotations" | verify-true
    get-property columns -index 3 | equals "New Project/org.eclipse.Entity2" | verify-true
    get-property columns -index 4 | equals "Unresolved Annotation" | verify-true
}
get-view "Tigerstripe Explorer" | get-tree 
    | get-item "New Project/src/org.eclipse/<<CheckAnnotation,IntegerAnnotation,Color,Font>>Entity1" 
    | get-property caption | equals "<<CheckAnnotation,IntegerAnnotation,Color,Font>>Entity1" | verify-true
get-view "Annotation Property View" | click -nowait
get-view "Tigerstripe Explorer" | get-tree 
    | select "New Project/src/org.eclipse/<<CheckAnnotation,IntegerAnnotation,Color,Font>>Entity1"
get-view "Annotation Property View" | get-table | get-property itemCount | equals 4 | verify-true
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
------=_.q7.content-3d2e0690-ce48-3609-83e0-c704d49f1eaf
Content-Type: q7/binary
Entry-Name: .q7.content

UEsDBBQACAAIAAAAIQAAAAAAAAAAAAAAAAAIAAAALmNvbnRlbnSNkV1PwjAUhu9N/A9L71lBwtfCJETw
G5BhDHizdFspNVvL2o4Nf71nBkY0arxrz3n6nve87Q+KJLZ2VGkuhYsadh1ZVIQy4oK5KDPrWhcNLs/P
+qFM7EIqGtlpx9YhFURx6SwOB6tIuFOpXJQqoCu0A3UXbYzZOhjneW7LhNlSMbyc3B2RH5WrR9DFn12c
dvCxa9MQSsgSJKEuarba3UbH9+haUb2ZrYdCSEMMWLnmMR0RwWLYBp22bJb+eOQiv85ubvWsq8f0ij5K
P1PFapICagjTLjoJQWW/hVE0jCGfwlAlSAwDqYKwaGU2kqE+7FL6jrjexmSPnxf4nx4hacuCrIWBIfrS
97xeg014Cv5eVrv3XrZ4es2HfVwR3/iHoFWrT8UceOUFJJiOQyLmv/O9UfttSAwbR7Vd9z5fBiLzzVe+
vPz19YB8AFBLBwg/hc81SQEAAEUCAABQSwECFAAUAAgACAAAACEAP4XPNUkBAABFAgAACAAAAAAAAAAA
AAAAAAAAAAAALmNvbnRlbnRQSwUGAAAAAAEAAQA2AAAAfwEAAAAA
------=_.q7.content-3d2e0690-ce48-3609-83e0-c704d49f1eaf--
------=_.content.raw-c2dfba28-ebef-3afe-bd39-76376d333cc9
Content-Type: q7/binary
Entry-Name: .content.raw

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
------=_.content.raw-c2dfba28-ebef-3afe-bd39-76376d333cc9--
